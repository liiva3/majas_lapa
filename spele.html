<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpÄ“le</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
  <header > 

    <div class="navigation">
        <nav><a href="index.html"><b>âŒ‚</b> SÄkums</a></nav>
        <nav><a href="spele.html">ğŸ¼ SpÄ“le</a></nav>
        <nav><a href="vesture.html">ğŸ» VÄ“sture</a></nav>
        </div>

    </header>

    <canvas id="myCanvas" width=850px height=600px style="background:url('https://metropolismag.com/wp-content/uploads/2021/08/Shanghai_CourtesyChenHao.jpg'); background-size: cover">  </canvas>
    
  </div>
  <div class="footer">

  </div> 

      <script>
        const myCanvas = document.getElementById("myCanvas");
       var ctx = myCanvas.getContext("2d");
       //Vijoles mainÄ«gie                                          
       var violin_y = 0;
       var violin_x = 0;
       const VioImg = new Image();
      VioImg.src = "https://static.vecteezy.com/system/resources/previews/001/206/505/non_2x/music-violin-png.png";
     
     //Nots mainÄ«gie
      var nots_x = 0;
      var nots_y = 0;
      const NotsImg = new Image();
      NotsImg.src = "https://static.vecteezy.com/system/resources/thumbnails/009/346/118/small_2x/musical-note-flat-icon-png.png";
    
      //MainÄ«go lielumi 
      const violinWidth = 120;
      const violinHeight = 120;
      const notsWidth = 50;
      const notsHeight = 50;

      var score = 0;
      var nots_atrums = 4;
      var FPS = 40;
      var time_remaining = 60;
    //Funkcija, kura sÄk spÄ“li no sÄkuma, ja tiek uzspiests "S"  
     function restart_game() {
     time_remaining = 60;
     score = 0;
     nots_atrums = 3;
     }

       //Funkcija, kura pamana, ja attÄ“li saskaras
       function ImagesTouching(x1, y1, img1w, img1h, x2, y2, img2w, img2h) {
         if (x1 >= x2+img2w || x1+img1w <= x2) return false;  // parÄk daudz pa kreisi/labi
         if (y1 >= y2+img2h || y1+img1h <= y2) return false; // pÄrÄk daudz uz augÅ¡u/leju
         return true;  
         }

   //Funkcija, kas uzstaisa â€œkustÄ«buâ€
   function Do_a_Frame () {
  ctx.clearRect(0, 0, myCanvas.width, myCanvas.height); //NotÄ«ra fonu
  ctx.fillStyle = "black";
  ctx.font = "20px Arial";
  ctx.fillText("RezultÄts: " + score, 20, 40); //ParÄda rezultÄtu
 
  violin_y = myCanvas.height - violinHeight; //NodroÅ¡ina, ka vijole ir fona apakÅ¡Ä
  ctx.drawImage(VioImg, violin_x, violin_y, violinWidth, violinHeight); //UzzÄ«mÄ“ vijoli

ctx.fillText("AtlikuÅ¡ais laiks: " + Math.round(time_remaining), 20, 60); //ParÄda atlikuÅ¡o laiku
   if (time_remaining <= 0) { //Ja laiks ir beidzies
        ctx.fillStyle= "red";
        ctx.font = "bold 50px Arial";
        ctx.textAlign="center";
        ctx.fillText("Beigas", myCanvas.width / 2, myCanvas.height / 2); //ParÄda tekstu
        ctx.textAlign="left";
        }
   
    else {
         time_remaining = time_remaining - 1/FPS; //CitÄdÄk laiks samazinÄs

         nots_y = nots_y + nots_atrums; //Kustina noti uz leju pa ekrÄnu
         if (nots_y > myCanvas.height) { //Ja nots ir nogÄjusi zem apakÅ¡as
              nots_y= 0;                 //Novieto to atpakaÄ¼ augÅ¡Ä
                nots_x= Math.random() * (myCanvas.width - notsWidth); }//IzvÄ“las nejauÅ¡u  x pozÄ«cÄ«ju
         }

ctx.drawImage(NotsImg, nots_x, nots_y, notsWidth, notsHeight); //UzzÄ«mÄ“ noti
       
          if (ImagesTouching(violin_x, violin_y,violinWidth, violinHeight, nots_x, nots_y, notsWidth, notsHeight)) {  //PÄrbauda, vai attÄ“li saskaras
           score = score + 1; //Pievieno rezultÄtam 1
           nots_x= -notsWidth;
            }
           }
           setInterval(Do_a_Frame, 1000/FPS);

         //Funkcija, kura pÄrvieto attÄ“lus, reaÄ£Ä“jot uz taustiÅ†u pieskÄrieniem
         function MyKeyDownHandler (MyEvent) {
          if (MyEvent.keyCode == 37 && violin_x > 0) {violin_x = violin_x - 10;} // pa kreisi
          if (MyEvent.keyCode == 39 && violin_x + violinWidth < myCanvas.width) {violin_x = violin_x + 10;}  // pa labi
          if (MyEvent.keyCode == 83) restart_game();                                             // S, lai atsÄktu spÄ“li
          MyEvent.preventDefault();
       }
  addEventListener("keydown", MyKeyDownHandler);
  myCanvas.width = window.innerWidth - 10;  // Aizpilda visu mÄjaaslapas platumu
  myCanvas.height = window.innerHeight - 10;  // Aizpilda visu mÄjaslapas augstumu
 </script>
</body>
</html>


